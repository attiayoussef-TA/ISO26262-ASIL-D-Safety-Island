; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; =================================================================
;  PROJECT: STM32 ASIL-D Safety Island
;  TARGET:  STM32F407VG (Discovery Board) or Generic F4
; =================================================================

[env:disco_f407vg]
platform = ststm32
board = disco_f407vg
framework = stm32cube

; --- Debugging & Optimization ---
; -O0: Disable optimization to ensure the "while(1)" loop isn't optimized away
; -g3: Maximum debug information for GDB
build_flags = 
    -O0 
    -g3
    -D STM32F407xx

; --- Serial Monitor Settings (For UART Debugging) ---
monitor_speed = 115200

; --- Debugger Settings ---
; We use ST-Link (built into most Discovery/Nucleo boards)
upload_protocol = stlink
debug_tool = stlink

; build_flags = ... -D SEMIHOSTING
